<style>


    body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-image: url('https://source.unsplash.com/1600x900/?landscape');
        font-family: 'Raleway', sans-serif;
        font-size: 120%;
        background-attachment: fixed;
        background-repeat: no-repeat;
        background-size: cover;
    }

    h1.temp {
        margin: 0;
        margin-bottom: 0.4em;
    }

    .card {
        background-color: #000033;
        opacity: 0.95;
        padding: 2em;
        border-radius: 30px;
        width: 100%;
        max-width: 450px;
        margin: 1em;
    }

    .search {
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8em;
    }

    button {
        margin: 0.5em;
        border-radius: 50%;
        border: none;
        height: 2.5em;
        width: 2.5em;
        outline: none;
        background: #7c7c7c2b;
        color: white;
        cursor: pointer;
        transition: 0.2s ease-in-out;
    }

        button:hover {
            background: #7c7c7c6b;
        }

    input.search-bar {
        border: none;
        outline: none;
        padding: 0.4em 0.8em;
        border-radius: 24px;
        background-color: #7c7c7c2b;
        color: white;
        font-family: inherit;
        font-size: 80%;
        width: calc(100% - 65px);
    }

    .description {
        text-transform: capitalize;
    }

    .weather {
        padding: 10px;
        margin: 10px;
        color: white;
    }

    .flexBox {
        display: flex;
        align-items: center;
    }

    .weather.loading {
        visibility: hidden;
        max-height: 20px;
        position: relative;
    }

        .weather.loading:after {
            visibility: visible;
            color: white;
            position: absolute;
            top: 0;
            left: 20px;
        }
</style>

<body>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@200&display=swap" rel="stylesheet">
    <script src="./script.js" defer></script>


    <div class="card">
        <div class="search">
            <input type="text" class="search-bar" placeholder="Search weather in your city">
            <button input="&#xf0e0" style="width: 1.5em; height: 1.5em;"></button>
        </div>

        <div class="weather loading">
            <h1 class="city">Weather in Gauteng</h1>
            <h1 class="temp">51C</h1>
            <div class="flexBox">
                <img src="" alt="" class="icon">
            </div>

            <div class="description">Cloudy</div>
            <div class="humidity">Humidity60%</div>
            <div class="wind">Wind Speed: 6.2km/h</div>
        </div>
    </div>
</body>

<script>
    let weather = {
        apiKey: "f61d0fcbb3428e11ac3edc32bbac4eb4",
        fetchWeather: function (city) {
            fetch(
                'https://api.openweathermap.org/data/2.5/weather?q='
                + city
                + '&units=metric&appid='
                + this.apiKey
            )
                .then((response) => response.json())
                .then((data) => this.displayWeather(data));
        },
        displayWeather: function (data) {
            const { name } = data;
            const { icon, description } = data.weather[0];
            const { temp, humidity } = data.main;
            const { speed } = data.wind;

            document.querySelector(".city").innerText = "Weather in " + name;
            document.querySelector(".icon").src = "https://openweathermap.org/img/wn/" + icon + ".png"
            document.querySelector(".description").innerText = description;
            document.querySelector(".temp").innerText = temp + "C";
            document.querySelector(".humidity").innerText = "Humidity: " + humidity + "%";
            document.querySelector(".wind").innerText = "Wind Speed: " + speed + "km/h";
            document.querySelector(".weather").classList.remove("loading");
            document.body.style.backgroundImage = "url('https://source.unsplash.com/1600x900/?" + name + "')";
        },
        search: function () {
            this.fetchWeather(document.querySelector(".search-bar").value);
        }
    };

    document.querySelector(".search button").addEventListener("click", function () {
        weather.search();
    });

    document.querySelector(".search-bar").addEventListener("keyup", function (event) {
        if (event.key == "Enter") {
            weather.search()
        }
    });


</script>